{"meta":{"title":"Zhou","subtitle":"","description":"","author":"zhou","url":"https://www.zzwox.top","root":"/"},"posts":[{"tags":[{"name":"redis","slug":"redis","permalink":"https://www.zzwox.top/tags/redis/"}],"title":"redis实现分布式锁","date":"2020/03/17","text":"redis实现分布式锁 分布式锁需要解决的问题 互斥性 安全性 死锁 容错 setnx key value 如果key不存在，则创建并赋值 setnx：set if not exist 时间复杂度：O（1） 返回值：设置成功，return 1； 设置失败， return 0 原子性，可用来实现分布式锁（指设置值和设置过期时间分别为原子性操作） 设置值和设置过期时间不是在同一条语句中，所以可能会出问题，即设置完值后来不及设置过期时间，线程就意外终止了，则这个key就会永久存在，别的线程就获取不到锁。不满足分布式锁的原子性要求 set key value [ex seconds] [px milliseconds] [NX|XX] ex seconds: 设置键的过期时间为seconds秒 px millseconds: 设置键的过期时间为milliseconds毫秒 NX（not exist）：只在键不存在时，才对键进行设置操作 XX：只在键存在时，才对键进行设置操作 set操作成功时，返回OK，否则返回nil 设置值和设置过期时间在同一条语句中，满足分布式锁的原子性要求","permalink":"https://www.zzwox.top/2020/03/17/redis%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/","photos":[]},{"tags":[{"name":"redis","slug":"redis","permalink":"https://www.zzwox.top/tags/redis/"}],"title":"redis从海量数据里查询符合条件的数据","date":"2020/03/13","text":"redis从海量数据里查询​ redis生成海量数据的方法： 新建a.sh,vim打开a.sh,输入#!/bin/bashfor ((i=0;i> redis_test.data#: time cat redis_test.data | redis-cli --pipe ​ keys pattern** : 查找所有符合给定模式pattern的key 一次性返回所有的key 当数据量过大时，会卡顿 scan cursor [match pattern] [count num] 基于游标的迭代器，需要基于上一次游标延续之前的迭代过程 以0作为游标开始一次新的迭代，知道命令返回游标0完成一次遍历 并不保证每次执行都返回给定数量的元素，支持模糊查询 scan每次查询完会返回本次查询的最后key的游标，即用于下一次查询","permalink":"https://www.zzwox.top/2020/03/13/redis%E4%BB%8E%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E9%87%8C%E6%9F%A5%E8%AF%A2%E7%AC%A6%E5%90%88%E6%9D%A1%E4%BB%B6%E7%9A%84%E6%95%B0%E6%8D%AE/","photos":[]},{"tags":[{"name":"语法","slug":"语法","permalink":"https://www.zzwox.top/tags/%E8%AF%AD%E6%B3%95/"},{"name":"markdown","slug":"markdown","permalink":"https://www.zzwox.top/tags/markdown/"}],"title":"markdown基础语法","date":"2020/03/11","text":"标题 #,##,###,####,#####,###### 对应 h1~h6 强调 **强调** 强调 斜体 *斜体* 斜体 删除 ~~删除~~ 删除 超链接 [链接](http://www.baidu.com) 链接 页内的超链接 [链接](#a1) 链接 需要在页内跳转的地方加上： 图片显示 ![图片](http://t9.baidu.com/it/u=3363001160,1163944807&fm=79&app=86&f=JPEG?w=1280&h=830) 无序列表 - + 空格 引用块 > + 空格 行内代码 `hello world` hello world 代码块 ```int a = 0; ​ System.out.println(“hello world “ + a); ``` int a = 10;System.out.println(\"hello world \" + a); 表格 `| a | b | c | | :–: | :–: | :–: | | a | c | d | | a | d | c |` a b c a c d a d c 任务列表 [x] 任务，完成 [] 任务，未完成 注脚 注脚[^1] [^1]:注脚1","permalink":"https://www.zzwox.top/2020/03/11/makrdown%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/","photos":[]},{"tags":[{"name":"杂记","slug":"杂记","permalink":"https://www.zzwox.top/tags/%E6%9D%82%E8%AE%B0/"}],"title":"开始","date":"2020/03/11","text":"开始 Java测试 public static void mian(){ System.out.println(\"hello world!\");} c++测试 #includeusing namespace std;int main(){ cout <","permalink":"https://www.zzwox.top/2020/03/11/%E5%BC%80%E5%A7%8B/","photos":[]}]}